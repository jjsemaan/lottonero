{% extends "base.html" %}
{% load static %}

{% block page_header %}
<div class="container header-container pt-5 mt-5">
  <div class="row pt-5 mt-3">
    <div class="col">
    </div>
  </div>
</div>
{% endblock %}

{% block header_content %}
<div class="masthead-content">
  <h2>EUROMILLIONS RESULTS</h2>
  <h3>for {{ latest_result.draw_date }}</h3>
  <h3>{{ latest_result.ball_1 }} {{ latest_result.ball_2 }} {{ latest_result.ball_3 }} {{ latest_result.ball_4 }} {{ latest_result.ball_5 }} {{ latest_result.lucky_star_1 }} {{ latest_result.lucky_star_2 }}</h3>
  <h2>{{ latest_result.jackpot }}</h2>
  <p>There was no winner of the EuroMillions jackpot. In total, over 32,000 players in Ireland won prizes in the EuroMillions and Plus games.</p>
</div>
{% endblock %}

{% block content %}
<div class="container-fluid">
  <div class="row">
    <div class="col-md-12 text-center">
      <h2 class="text-dark">Our Latest Winning Predictions</h2>
      <!-- Debug statement -->
      <p class="text-dark">Predictions Count: {{ latest_predictions|length }}</p>

      {% if latest_predictions %}
      <table class="table table-striped table-bordered text-dark">
        <thead>
          <tr>
            <th>Predictions</th>
            <th>Lucky Stars</th>
            <th>Winning Balls</th>
            <th>Winning Lucky Stars</th>
            <th>Match Type</th>
          </tr>
        </thead>
        <tbody>
          {% for prediction in latest_predictions %}
          <tr>
            <td>{{ prediction.pred_ball_1 }},
              {{ prediction.pred_ball_2 }},
              {{ prediction.pred_ball_3 }},
              {{ prediction.pred_ball_4 }},
              {{ prediction.pred_ball_5 }}
            </td>
            <td>{{ prediction.pred_lucky_1 }}, {{ prediction.pred_lucky_2 }}</td>
            <td>{{ prediction.winning_balls }}</td>
            <td>{{ prediction.winning_lucky_stars }}</td>
            <td>{{ prediction.match_type }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <p>No predictions available for the latest date with non-null match type.</p>
      {% endif %}
    </div>
  </div>
  <div class="row">
    <div class="col-md-12 text-center">
      {% if user.is_authenticated %}
      <h4>
        <a href="{% url 'predictions' %}" class="predict-button btn rounded-pill text-uppercase"
          style="padding: 10px 30px;">Next Draw Predictions</a>
      </h4>
      {% else %}
      <h4>
        <a href="{% url 'account_login' %}" class="predict-button btn rounded-pill text-uppercase"
          style="padding: 10px 30px;">Next Draw Predictions</a>
      </h4>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
