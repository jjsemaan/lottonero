{% extends "account/base.html" %}
{% load static %}
{% load i18n %}
{% load crispy_forms_tags %}

{% block nav_name %}Change Password{% endblock %}

{% block header_content %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-xl-10 col-lg-12 col-md-9">
            <div class="card o-hidden border-0 shadow-lg my-5">
                <div class="card-body p-0">
                    <div class="row mb-4">
                        <div class="col-lg-2 d-none d-lg-block"></div>
                        <div class="col-lg-8">
                            <div class="p-5">
                                <div class="text-center text-black pt-2">
                                    <h2 class="mb-3">Change Password</h2>
                                    {% if user.is_authenticated %}
                                        <p class="mb-1 text-secondary">Hello {{ user.first_name }} !</p>
                                        <p class="mb-1 text-secondary">You are about to change the password for</p>
                                        <p class="mb-3 text-secondary font-weight-bold">{{ user.email }}</p>
                                    {% else %}
                                        <p class="mb-3">You are not signed in.</p>
                                    {% endif %}
                                </div>
                                {% if user.is_authenticated %}
                                    <form method="post" action="{% url 'user_profile:change_password' %}">
                                        {% csrf_token %}
                                        {{ form|crispy }}
                                        <button type="submit" class="btn btn-dark btn-block">Change Password</button>
                                    </form>
                                {% else %}
                                    <div class="alert alert-warning" role="alert">
                                        Please <a href="{% url 'login' %}">log in</a> to change your password.
                                    </div>
                                {% endif %}
                            </div>                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}